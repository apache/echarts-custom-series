/*
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* "License"); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing,
* software distributed under the License is distributed on an
* "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
* KIND, either express or implied.  See the License for the
* specific language governing permissions and limitations
* under the License.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).violinCustomSeriesInstaller=t()}(this,(function(){"use strict";function e(e){return Math.abs(e)<=1?.75*(1-e*e):0}var t=function(t,n){var o={};if(null==t.context.violins){t.context.violins=[],o=t.context.violins;for(var i=t.dataInsideLength,a=0;a<i;++a){var l=n.value(0,a);null==o[l]&&(o[l]={firstDataIndex:a,data:[]}),o[l].data.push(n.value(1,a))}}else o=t.context.violins;t.itemPayload.symbolSize;var r,u,s,d=n.value(0),f=n.value(1),c=n.coord([d,f]),v=t.itemPayload.bandWidthScale,p=(n.coord([1,0])[0]-n.coord([0,0])[0])*(null==v?1:v),h=o[d],y=null;if(h&&h.firstDataIndex===t.dataIndexInside){for(var g=(r=e,u=1,s=h.data,function(e){for(var t=0,n=0;n<s.length;n++)t+=r((e-s[n])/u);return t/(s.length*u)}),m=t.itemPayload.binCount||100,x=[],b=0;b<m;b++)x.push(b*(10/(m-1)));for(var I=x.map((function(e){return[e,g(e)]})),P=[],S=[],C=function(){if(S.length>1){for(var e=S.length-1;e>=0;--e)S.push([2*c[0]-S[e][0],S[e][1]]);var o=t.itemPayload.areaOpacity;P.push({type:"polygon",shape:{points:S.slice()},style:{fill:n.visual("color"),opacity:null==o?.5:o}})}S.length=0},D=0;D<I.length;++D){var T=n.coord([d,I[D][0]]);I[D][1]<.001?C():S.push([T[0]+p/2*I[D][1],T[1]])}C(),y={type:"group",children:P,silent:!0}}return y};return{install:function(e){e.registerCustomSeries("violin",t)}}}));
//# sourceMappingURL=violin.min.js.map
