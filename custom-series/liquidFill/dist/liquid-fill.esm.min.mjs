/*
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* "License"); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing,
* software distributed under the License is distributed on an
* "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
* KIND, either express or implied.  See the License for the
* specific language governing permissions and limitations
* under the License.
*/
function createLabelGroup(e){var t,i,n,a,o,r,l,d=e.style,s=e.cx,u=e.cy,c=e.innerRadius,f=e.boundingLeft,h=e.boundingTop,v=e.boundingWidth,g=e.boundingHeight,p=e.wavePathData,y=e.waveInitialX,x=e.waveAnimation,m=e.defaultColor,I=e.insideColorOverride;if(d){var b=d,w=b.text;if(null!=w&&""!=="".concat(w)){var P=resolvePosition(b.textPosition,s,u,c,f,h,v,g),A=buildBaseTextStyle(b,P.x,P.y),S=null!==(i=null!==(t=b.textAlign)&&void 0!==t?t:b.align)&&void 0!==i?i:P.align,D=null!==(n=resolveVerticalAlign(b))&&void 0!==n?n:P.verticalAlign;A.align=S,A.textAlign=S,A.verticalAlign=D,A.textVerticalAlign=D,A.text=String(w);var M=null!==(o=null!==(a=b.textFill)&&void 0!==a?a:b.fill)&&void 0!==o?o:m,C=null!==(l=null!==(r=null!=I?I:b.textInsideColor)&&void 0!==r?r:b.insideColor)&&void 0!==l?l:M,F={type:"text",silent:!0,z2:40,style:Object.assign({},A,{fill:M})},k={type:"text",silent:!0,z2:41,style:Object.assign({},A,{fill:C})},W={type:"path",shape:{pathData:p},x:y,clipPath:{type:"circle",shape:{cx:s,cy:u,r:c}}};return x&&(W.keyframeAnimation=cloneAnimation(x)),k.clipPath=W,{type:"group",silent:!0,children:[F,k]}}}}function buildBaseTextStyle(e,t,i){var n,a={x:t,y:i};assignIfDefined(a,"fontSize",e.fontSize),assignIfDefined(a,"fontFamily",e.fontFamily),assignIfDefined(a,"fontWeight",e.fontWeight),assignIfDefined(a,"fontStyle",e.fontStyle),assignIfDefined(a,"lineHeight",e.lineHeight),assignIfDefined(a,"rich",e.rich),assignIfDefined(a,"backgroundColor",e.backgroundColor),assignIfDefined(a,"borderColor",e.borderColor),assignIfDefined(a,"borderWidth",e.borderWidth),assignIfDefined(a,"borderRadius",e.borderRadius),assignIfDefined(a,"padding",e.padding);var o=null!=e.textShadowBlur?e.textShadowBlur:e.shadowBlur,r=null!=e.textShadowColor?e.textShadowColor:e.shadowColor,l=null!=e.textShadowOffsetX?e.textShadowOffsetX:e.shadowOffsetX,d=null!=e.textShadowOffsetY?e.textShadowOffsetY:e.shadowOffsetY;assignIfDefined(a,"shadowBlur",o),assignIfDefined(a,"shadowColor",r),assignIfDefined(a,"shadowOffsetX",l),assignIfDefined(a,"shadowOffsetY",d);var s=null!=e.textStroke?e.textStroke:e.stroke,u=null!=e.textStrokeWidth?e.textStrokeWidth:null!==(n=e.lineWidth)&&void 0!==n?n:e.strokeWidth;return assignIfDefined(a,"stroke",s),assignIfDefined(a,"lineWidth",u),a}function resolveVerticalAlign(e){var t,i,n=null!==(t=e.textVerticalAlign)&&void 0!==t?t:e.verticalAlign;if("top"===n||"middle"===n||"bottom"===n)return n;if("center"===n)return"middle";var a=null!==(i=e.textBaseline)&&void 0!==i?i:e.baseline;return"top"===a?"top":"middle"===a||"center"===a?"middle":"bottom"===a||"baseline"===a?"bottom":void 0}function resolvePosition(e,t,i,n,a,o,r,l){if(Array.isArray(e))return{x:parseCoordinate(e[0],r,t-a)+a,y:parseCoordinate(e[1],l,i-o)+o,align:"center",verticalAlign:"middle"};switch(e){case"inside":default:return{x:t,y:i,align:"center",verticalAlign:"middle"};case"left":case"insideLeft":return{x:t-.6*n,y:i,align:"left",verticalAlign:"middle"};case"right":case"insideRight":return{x:t+.6*n,y:i,align:"right",verticalAlign:"middle"};case"top":case"insideTop":return{x:t,y:i-.6*n,align:"center",verticalAlign:"top"};case"bottom":case"insideBottom":return{x:t,y:i+.6*n,align:"center",verticalAlign:"bottom"}}}function parseCoordinate(e,t,i){if("number"==typeof e&&isFinite(e))return e;if("string"==typeof e){var n=parsePercent(e);if(null!=n)return n*t;var a=Number(e);if(!Number.isNaN(a))return a}return i}function parsePercent(e){var t=e.match(/^(-?\d+(?:\.\d+)?)%$/);return t?parseFloat(t[1])/100:null}function assignIfDefined(e,t,i){null!=i&&(e[t]=i)}function cloneAnimation(e){if(!e)return e;if(Array.isArray(e))return e.map((function(e){return cloneAnimation(e)}));var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return Array.isArray(e.keyframes)&&(t.keyframes=e.keyframes.map((function(e){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}))),t}function getWaterPositions(e,t,i,n){return 0===t?[[e+.5*i/Math.PI/2,n/2],[e+.5*i/Math.PI,n],[e+i/4,n]]:1===t?[[e+.5*i/Math.PI/2*(Math.PI-2),n],[e+.5*i/Math.PI/2*(Math.PI-1),n/2],[e+i/4,0]]:2===t?[[e+.5*i/Math.PI/2,-n/2],[e+.5*i/Math.PI,-n],[e+i/4,-n]]:[[e+.5*i/Math.PI/2*(Math.PI-2),-n],[e+.5*i/Math.PI/2*(Math.PI-1),-n/2],[e+i/4,0]]}function createWavePath(e,t,i,n,a,o,r){for(var l=a||1,d=Math.max(1,Math.ceil(t/l)),s=4*d,u="M ".concat(e," ").concat(i),c=0;c<s;++c){var f=getWaterPositions(c*l/4,c%4,l,n);u+=" C ".concat(f[0][0]+e," ").concat(-f[0][1]+i)+" ".concat(f[1][0]+e," ").concat(-f[1][1]+i)+" ".concat(f[2][0]+e," ").concat(-f[2][1]+i)}return u+=" L ".concat(e+d*l," ").concat(r+o),u+=" L ".concat(e," ").concat(r+o),u+=" L ".concat(e," ").concat(i),u+=" Z"}var renderItem=function(e,t){var i,n,a,o,r,l,d,s,u,c,f,h,v,g,p,y=e.itemPayload,x=t.getWidth(),m=t.getHeight(),I=Math.min(x,m),b=t.style(),w=b,P=y.center||["50%","50%"],A="string"==typeof P[0]?parseFloat(P[0])/100*x:P[0],S="string"==typeof P[1]?parseFloat(P[1])/100*m:P[1],D=y.radius||"50%",M="string"==typeof D?parseFloat(D)/100*I/2:D,C=!1!==(null===(i=y.outline)||void 0===i?void 0:i.show),F=(null===(n=y.outline)||void 0===n?void 0:n.borderDistance)||8,k=(null===(o=null===(a=y.outline)||void 0===a?void 0:a.itemStyle)||void 0===o?void 0:o.borderWidth)||8,W=M-(C?k/2+F:0),O=[];0===e.dataIndex&&O.push({type:"circle",shape:{cx:A,cy:S,r:W},style:{fill:(null===(r=y.backgroundStyle)||void 0===r?void 0:r.color)||"#E3F7FF",stroke:"none"},z2:0});var L=e.dataInsideLength,B=t.value(0),z=S+W-B*W*2,X=y.amplitude||8*I/500,H="string"==typeof y.waveLength?parseFloat(y.waveLength)/100*W*2:y.waveLength||1.6*W;(!isFinite(H)||H<=0)&&(H=W||1);var N,R=H||1,T=void 0===y.phase?"auto":y.phase,j=(("auto"===T?e.dataIndex*Math.PI/4:T)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)/(2*Math.PI)*R,V=null!==(l=y.direction)&&void 0!==l?l:"right",Y="left"===V?1:"right"===V?-1:0,E=1===Y?R:0,G=2*W+E+(-1===Y?R:0),q=createWavePath(A-W-E,Math.max(1,Math.ceil(G/R))*R,z,X,R,W,S),Z=null!==(d=y.period)&&void 0!==d?d:"auto";if("auto"===Z){var $=Math.max(L,1);N=5e3*(0===L?1:.2+(L-e.dataIndex)/$*.8)}else N="function"==typeof Z?Z(B,e.dataIndex):Z;(!isFinite(N)||N<=0)&&(N=2e3);var J=-j,K=N,Q=y.animationDuration;null!=Q&&isFinite(Q)&&Q>0&&(K=Q),(!isFinite(K)||K<=0)&&(K=0);var U,_=K>0&&R>0?R/K:0,ee=0===Y||0===_?0:-j/_,te=y.animationEasing,ie=w.fill||t.visual("color"),ne={type:"path",shape:{pathData:q},x:J,style:{fill:ie,opacity:null!=w.opacity?Number(w.opacity):null!==(u=null===(s=y.itemStyle)||void 0===s?void 0:s.opacity)&&void 0!==u?u:.95,shadowBlur:null!==(c=w.shadowBlur)&&void 0!==c?c:null===(f=y.itemStyle)||void 0===f?void 0:f.shadowBlur,shadowColor:null!==(h=w.shadowColor)&&void 0!==h?h:null===(v=y.itemStyle)||void 0===v?void 0:v.shadowColor},z2:10+e.dataIndex},ae={type:"group",y:0,clipPath:{type:"circle",shape:{cx:A,cy:S,r:W}},children:[ne]};if(!1!==y.waveAnimation&&0!==Y&&R>0&&K>0&&_>0){var oe={duration:K,loop:!0,delay:ee,keyframes:[{percent:0,x:J},{percent:1,x:J+Y*R}]};te&&(oe.easing=te),U=oe}if(U&&(ne.keyframeAnimation=U),O.push(ae),0===e.dataIndex){var re=createLabelGroup({style:b,cx:A,cy:S,innerRadius:W,boundingLeft:A-W,boundingTop:S-W,boundingWidth:2*W,boundingHeight:2*W,wavePathData:q,waveInitialX:J,waveAnimation:U,defaultColor:null!==(p=null!==(g=w.textFill)&&void 0!==g?g:w.fill)&&void 0!==p?p:ie,insideColorOverride:y.labelInsideColor});re&&O.push(re)}return{type:"group",children:O}},index={install:function(e){e.registerCustomSeries("liquidFill",renderItem)}};export{index as default};
//# sourceMappingURL=liquid-fill.esm.min.mjs.map
