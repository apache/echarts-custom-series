/*
* Licensed to the Apache Software Foundation (ASF) under one
* or more contributor license agreements.  See the NOTICE file
* distributed with this work for additional information
* regarding copyright ownership.  The ASF licenses this file
* to you under the Apache License, Version 2.0 (the
* "License"); you may not use this file except in compliance
* with the License.  You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing,
* software distributed under the License is distributed on an
* "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
* KIND, either express or implied.  See the License for the
* specific language governing permissions and limitations
* under the License.
*/
function createLabelGroup(e){var t,i,n,a,o,l,r,d=e.style,s=e.cx,c=e.cy,u=e.innerRadius,f=e.boundingLeft,h=e.boundingTop,v=e.boundingWidth,g=e.boundingHeight,p=e.wavePathData,y=e.waveInitialX,x=e.waveAnimation,m=e.defaultColor,I=e.insideColorOverride;if(d){var b=d,w=b.text;if(null!=w&&""!=="".concat(w)){var P=resolvePosition(b.textPosition,s,c,u,f,h,v,g),A=buildBaseTextStyle(b,P.x,P.y),S=null!==(i=null!==(t=b.textAlign)&&void 0!==t?t:b.align)&&void 0!==i?i:P.align,M=null!==(n=resolveVerticalAlign(b))&&void 0!==n?n:P.verticalAlign;A.align=S,A.textAlign=S,A.verticalAlign=M,A.textVerticalAlign=M,A.text=String(w);var C=null!==(o=null!==(a=b.textFill)&&void 0!==a?a:b.fill)&&void 0!==o?o:m,D=null!==(r=null!==(l=null!=I?I:b.textInsideColor)&&void 0!==l?l:b.insideColor)&&void 0!==r?r:C,k={type:"text",silent:!0,z2:40,style:Object.assign({},A,{fill:C})},W={type:"text",silent:!0,z2:41,style:Object.assign({},A,{fill:D})},F={type:"path",shape:{pathData:p},x:y,clipPath:{type:"circle",shape:{cx:s,cy:c,r:u}}};return x&&(F.keyframeAnimation=cloneAnimation(x)),W.clipPath=F,{type:"group",silent:!0,children:[k,W]}}}}function buildBaseTextStyle(e,t,i){var n,a={x:t,y:i};assignIfDefined(a,"fontSize",e.fontSize),assignIfDefined(a,"fontFamily",e.fontFamily),assignIfDefined(a,"fontWeight",e.fontWeight),assignIfDefined(a,"fontStyle",e.fontStyle),assignIfDefined(a,"lineHeight",e.lineHeight),assignIfDefined(a,"rich",e.rich),assignIfDefined(a,"backgroundColor",e.backgroundColor),assignIfDefined(a,"borderColor",e.borderColor),assignIfDefined(a,"borderWidth",e.borderWidth),assignIfDefined(a,"borderRadius",e.borderRadius),assignIfDefined(a,"padding",e.padding);var o=null!=e.textShadowBlur?e.textShadowBlur:e.shadowBlur,l=null!=e.textShadowColor?e.textShadowColor:e.shadowColor,r=null!=e.textShadowOffsetX?e.textShadowOffsetX:e.shadowOffsetX,d=null!=e.textShadowOffsetY?e.textShadowOffsetY:e.shadowOffsetY;assignIfDefined(a,"shadowBlur",o),assignIfDefined(a,"shadowColor",l),assignIfDefined(a,"shadowOffsetX",r),assignIfDefined(a,"shadowOffsetY",d);var s=null!=e.textStroke?e.textStroke:e.stroke,c=null!=e.textStrokeWidth?e.textStrokeWidth:null!==(n=e.lineWidth)&&void 0!==n?n:e.strokeWidth;return assignIfDefined(a,"stroke",s),assignIfDefined(a,"lineWidth",c),a}function resolveVerticalAlign(e){var t,i,n=null!==(t=e.textVerticalAlign)&&void 0!==t?t:e.verticalAlign;if("top"===n||"middle"===n||"bottom"===n)return n;if("center"===n)return"middle";var a=null!==(i=e.textBaseline)&&void 0!==i?i:e.baseline;return"top"===a?"top":"middle"===a||"center"===a?"middle":"bottom"===a||"baseline"===a?"bottom":void 0}function resolvePosition(e,t,i,n,a,o,l,r){if(Array.isArray(e))return{x:parseCoordinate(e[0],l,t-a)+a,y:parseCoordinate(e[1],r,i-o)+o,align:"center",verticalAlign:"middle"};switch(e){case"inside":default:return{x:t,y:i,align:"center",verticalAlign:"middle"};case"left":case"insideLeft":return{x:t-.6*n,y:i,align:"left",verticalAlign:"middle"};case"right":case"insideRight":return{x:t+.6*n,y:i,align:"right",verticalAlign:"middle"};case"top":case"insideTop":return{x:t,y:i-.6*n,align:"center",verticalAlign:"top"};case"bottom":case"insideBottom":return{x:t,y:i+.6*n,align:"center",verticalAlign:"bottom"}}}function parseCoordinate(e,t,i){if("number"==typeof e&&isFinite(e))return e;if("string"==typeof e){var n=parsePercent(e);if(null!=n)return n*t;var a=Number(e);if(!Number.isNaN(a))return a}return i}function parsePercent(e){var t=e.match(/^(-?\d+(?:\.\d+)?)%$/);return t?parseFloat(t[1])/100:null}function assignIfDefined(e,t,i){null!=i&&(e[t]=i)}function cloneAnimation(e){if(!e)return e;if(Array.isArray(e))return e.map((function(e){return cloneAnimation(e)}));var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return Array.isArray(e.keyframes)&&(t.keyframes=e.keyframes.map((function(e){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}))),t}function getWaterPositions(e,t,i,n){return 0===t?[[e+.5*i/Math.PI/2,n/2],[e+.5*i/Math.PI,n],[e+i/4,n]]:1===t?[[e+.5*i/Math.PI/2*(Math.PI-2),n],[e+.5*i/Math.PI/2*(Math.PI-1),n/2],[e+i/4,0]]:2===t?[[e+.5*i/Math.PI/2,-n/2],[e+.5*i/Math.PI,-n],[e+i/4,-n]]:[[e+.5*i/Math.PI/2*(Math.PI-2),-n],[e+.5*i/Math.PI/2*(Math.PI-1),-n/2],[e+i/4,0]]}function createWavePath(e,t,i,n,a,o,l){for(var r=a||1,d=Math.max(1,Math.ceil(t/r)),s=4*d,c="M ".concat(e," ").concat(i),u=0;u<s;++u){var f=getWaterPositions(u*r/4,u%4,r,n);c+=" C ".concat(f[0][0]+e," ").concat(-f[0][1]+i)+" ".concat(f[1][0]+e," ").concat(-f[1][1]+i)+" ".concat(f[2][0]+e," ").concat(-f[2][1]+i)}return c+=" L ".concat(e+d*r," ").concat(l+o),c+=" L ".concat(e," ").concat(l+o),c+=" L ".concat(e," ").concat(i),c+=" Z"}var renderItem=function(e,t){var i,n,a,o,l,r,d,s,c,u,f,h,v,g,p,y=e.itemPayload,x=t.getWidth(),m=t.getHeight(),I=Math.min(x,m),b=t.style(),w=b,P=y.center||["50%","50%"],A="string"==typeof P[0]?parseFloat(P[0])/100*x:P[0],S="string"==typeof P[1]?parseFloat(P[1])/100*m:P[1],M=y.radius||"50%",C="string"==typeof M?parseFloat(M)/100*I/2:M,D=!1!==(null===(i=y.outline)||void 0===i?void 0:i.show),k=(null===(n=y.outline)||void 0===n?void 0:n.borderDistance)||8,W=(null===(o=null===(a=y.outline)||void 0===a?void 0:a.itemStyle)||void 0===o?void 0:o.borderWidth)||8,F=C-(D?W/2+k:0),O=[];0===e.dataIndex&&O.push({type:"circle",shape:{cx:A,cy:S,r:F},style:{fill:(null===(l=y.backgroundStyle)||void 0===l?void 0:l.color)||"#E3F7FF",stroke:"none"},z2:0});var L=e.dataInsideLength,B=t.value(0),z=S+F-B*F*2,X=y.amplitude||8*I/500,H="string"==typeof y.waveLength?parseFloat(y.waveLength)/100*F*2:y.waveLength||1.6*F;(!isFinite(H)||H<=0)&&(H=F||1);var N,R=H||1,T=void 0===y.phase?"auto":y.phase,j=(("auto"===T?e.dataIndex*Math.PI/4:T)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)/(2*Math.PI)*R,V=null!==(r=y.direction)&&void 0!==r?r:"right",Y="left"===V?1:"right"===V?-1:0,G=1===Y?R:0,q=2*F+G+(-1===Y?R:0),E=createWavePath(A-F-G,Math.max(1,Math.ceil(q/R))*R,z,X,R,F,S),Z=null!==(d=y.period)&&void 0!==d?d:"auto";if("auto"===Z){var $=Math.max(L,1);N=5e3*(0===L?1:.2+(L-e.dataIndex)/$*.8)}else N="function"==typeof Z?Z(B,e.dataIndex):Z;(!isFinite(N)||N<=0)&&(N=2e3);var J,K=-j,Q=0===N?0:R/N,U=0===Q?N:R/Q,_=0===Y||0===Q?0:-j/Q,ee=w.fill||t.visual("color"),te={type:"path",shape:{pathData:E},x:K,style:{fill:ee,opacity:null!=w.opacity?Number(w.opacity):null!==(c=null===(s=y.itemStyle)||void 0===s?void 0:s.opacity)&&void 0!==c?c:.95,shadowBlur:null!==(u=w.shadowBlur)&&void 0!==u?u:null===(f=y.itemStyle)||void 0===f?void 0:f.shadowBlur,shadowColor:null!==(h=w.shadowColor)&&void 0!==h?h:null===(v=y.itemStyle)||void 0===v?void 0:v.shadowColor},z2:10+e.dataIndex},ie={type:"group",y:0,clipPath:{type:"circle",shape:{cx:A,cy:S,r:F}},children:[te]};if(!1!==y.waveAnimation&&0!==Y&&R>0&&U>0&&Q>0&&(J={duration:U,loop:!0,delay:_,keyframes:[{percent:0,x:K},{percent:1,x:K+Y*R}]}),J&&(te.keyframeAnimation=J),O.push(ie),0===e.dataIndex){var ne=createLabelGroup({style:b,cx:A,cy:S,innerRadius:F,boundingLeft:A-F,boundingTop:S-F,boundingWidth:2*F,boundingHeight:2*F,wavePathData:E,waveInitialX:K,waveAnimation:J,defaultColor:null!==(p=null!==(g=w.textFill)&&void 0!==g?g:w.fill)&&void 0!==p?p:ee,insideColorOverride:y.labelInsideColor});ne&&O.push(ne)}return{type:"group",children:O}},index={install:function(e){e.registerCustomSeries("liquidFill",renderItem)}};export{index as default};
//# sourceMappingURL=liquid-fill.esm.min.mjs.map
